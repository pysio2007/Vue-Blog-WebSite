import{_ as o,c,e as t,d as e,b as p,a as n,o as r,r as l}from"./app-DbYlmR8c.js";const d={},h={class:"hint-container details"};function m(u,a){const i=l("AsciinemaPlayer"),s=l("VPCard");return r(),c("div",null,[t(" markdownlint-disable MD028 "),a[1]||(a[1]=e("div",{class:"hint-container info"},[e("p",{class:"hint-container-title"},"相关信息"),e("p",null,"MCIM 需要提供文件镜像，但由于成本问题，以及受到 OpenBMCLAPI 的启发，本项目分发 Mod 文件基于网盘 感谢各位的支持~！感谢您为改善国内 Mod 下载环境的贡献！")],-1)),t(" markdownlint-enable MD028 "),t(" more "),a[2]||(a[2]=p(`<h2 id="openbmclapi" tabindex="-1"><a class="header-anchor" href="#openbmclapi"><span>OpenBmclapi</span></a></h2><div class="hint-container tip"><p class="hint-container-title">提示</p><p>我更建议你使用已经修改过的OpenMcim执行上线</p></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>因为 Modrinth 原因 会有很多Hash错误的文件 未修改的OpenBmclapi无法上线</p></div><h3 id="从源码运行" tabindex="-1"><a class="header-anchor" href="#从源码运行"><span>从源码运行</span></a></h3><h4 id="环境" tabindex="-1"><a class="header-anchor" href="#环境"><span>环境</span></a></h4><ul><li>Node.js 18以上</li><li>Windows/MacOS/Linux, x86/arm均可 (凡是nodejs支持的环境都可以)</li></ul><h4 id="设置环境" tabindex="-1"><a class="header-anchor" href="#设置环境"><span>设置环境</span></a></h4><ol><li>去 <a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener noreferrer">https://nodejs.org/zh-cn/</a> 下载LTS版本的nodejs并安装</li><li>Clone 并安装依赖</li></ol><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">git</span> clone https://github.com/bangbang93/openbmclapi</span>
<span class="line"><span class="token builtin class-name">cd</span> openbmclapi</span>
<span class="line"><span class="token comment">## 安装依赖</span></span>
<span class="line"><span class="token function">npm</span> ci</span>
<span class="line"><span class="token comment">## 编译</span></span>
<span class="line"><span class="token function">npm</span> run build</span>
<span class="line"><span class="token comment">## 运行</span></span>
<span class="line"><span class="token function">node</span> dist/index.js</span>
<span class="line"></span></code></pre></div><ol start="3"><li><p>如果你看到了 <code>CLUSTER_ID is not set</code> 的报错, 说明一切正常, 接下来 修改代码 使其运行在OpenMCIM</p></li><li><p>修改 <code>dist/cluster.js</code> 文件, 找到</p></li></ol><div class="language-javascript" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> whiteListDomain <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;bangbang93.com&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><p>修改为</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js" data-title="js"><pre><code><span class="line"><span class="token keyword">const</span> whiteListDomain <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;localhost&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;bangbang93.com&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;files.mcimirror.top&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><h4 id="设置参数" tabindex="-1"><a class="header-anchor" href="#设置参数"><span>设置参数</span></a></h4><p>在项目根目录创建一个文件, 名为 <code>.env</code></p><p>写入如下内容</p><div class="language-env" data-highlighter="prismjs" data-ext="env" data-title="env"><pre><code><span class="line">CLUSTER_ID=你的CLUSTER_ID</span>
<span class="line">CLUSTER_SECRET=你的CLUSTER_SECRET</span>
<span class="line">CLUSTER_PORT=对外访问端口</span>
<span class="line">CLUSTER_BMCLAPI=https://files.mcimirror.top</span>
<span class="line"></span></code></pre></div><p>CLUSTER_ID 和 CLUSTER_SECRET 请联系管理员获取</p><p>如果配置无误的话, 运行程序, 就会开始拉取文件, 拉取完成后就会开始等待服务器分发请求了</p>`,19)),e("details",h,[a[0]||(a[0]=e("summary",null,"这是一个简短的修改部署视频",-1)),n(i,{src:"https://cdn.akaere.online/asciinema.org/a/679565.cast",options:{theme:"monokai"}})]),a[3]||(a[3]=p(`<h2 id="node-openmcim" tabindex="-1"><a class="header-anchor" href="#node-openmcim"><span>Node-OpenMcim</span></a></h2><h3 id="使用docker" tabindex="-1"><a class="header-anchor" href="#使用docker"><span>使用Docker</span></a></h3><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">-e</span> <span class="token assign-left variable">CLUSTER_ID</span><span class="token operator">=</span><span class="token variable">\${CLUSTER_ID}</span> <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">-e</span> <span class="token assign-left variable">CLUSTER_SECRET</span><span class="token operator">=</span><span class="token variable">\${CLUSTER_SECRET}</span> <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">-e</span> <span class="token assign-left variable">CLUSTER_PUBLIC_PORT</span><span class="token operator">=</span><span class="token variable">\${CLUSTER_PORT}</span> <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">-e</span> <span class="token assign-left variable">TZ</span><span class="token operator">=</span>Asia/Shanghai <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">-v</span> /data/mcim:/opt/mcim <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">-p</span> <span class="token variable">\${CLUSTER_PORT}</span><span class="token builtin class-name">:</span><span class="token variable">\${CLUSTER_PORT}</span> <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">--restart</span> unless-stop <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">--name</span> mcim <span class="token punctuation">\\</span></span>
<span class="line">zerowolf233/mcim</span>
<span class="line"></span></code></pre></div><h3 id="从源码安装" tabindex="-1"><a class="header-anchor" href="#从源码安装"><span>从源码安装</span></a></h3><h4 id="环境-1" tabindex="-1"><a class="header-anchor" href="#环境-1"><span>环境</span></a></h4><ul><li>Node.js 18 以上</li><li>Windows/MacOS/Linux</li><li>x86/arm 均可 (需支持Nodejs)</li></ul><h4 id="设置环境-1" tabindex="-1"><a class="header-anchor" href="#设置环境-1"><span>设置环境</span></a></h4><ol><li>去 <a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener noreferrer">https://nodejs.org/zh-cn/</a> 下载LTS版本的nodejs并安装</li><li>Clone 并安装依赖</li></ol><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">git</span> clone https://github.com/ZeroWolf233/node-openmcim</span>
<span class="line"><span class="token builtin class-name">cd</span> node-openmcim </span>
<span class="line"><span class="token comment">## 安装依赖</span></span>
<span class="line"><span class="token function">npm</span> ci</span>
<span class="line"><span class="token comment">## 编译</span></span>
<span class="line"><span class="token function">npm</span> run build</span>
<span class="line"><span class="token comment">## 运行</span></span>
<span class="line"><span class="token function">node</span> dist/index.js</span>
<span class="line"></span></code></pre></div><ol start="3"><li>如果你看到了 <code>CLUSTER_ID is not set</code> 的报错, 说明一切正常, 该设置参数了</li></ol><h4 id="设置参数-1" tabindex="-1"><a class="header-anchor" href="#设置参数-1"><span>设置参数</span></a></h4><p>在项目根目录创建一个文件, 名为 <code>.env</code></p><p>写入如下内容</p><div class="language-env" data-highlighter="prismjs" data-ext="env" data-title="env"><pre><code><span class="line">CLUSTER_ID=你的节点ID</span>
<span class="line">CLUSTER_SECRET=你的节点密钥</span>
<span class="line">CLUSTER_PUBLIC_PORT=你的对外开放端口（用户请求时访问）</span>
<span class="line">CLUSTER_PORT=你的本地开放端口</span>
<span class="line">CLUSTER_STORAGE=存储类型</span>
<span class="line">CLUSTER_STORAGE_OPTIONS=存储配置项（请参考上方Alist配置）</span>
<span class="line"></span></code></pre></div><p>如果配置无误的话, 运行程序, 就会开始拉取文件, 拉取完成后就会开始等待服务器分发请求了！</p><h2 id="反向代理节点" tabindex="-1"><a class="header-anchor" href="#反向代理节点"><span>反向代理节点</span></a></h2><h3 id="windows-部署" tabindex="-1"><a class="header-anchor" href="#windows-部署"><span>Windows 部署</span></a></h3><ol><li><p>前往 <a href="https://www.pysio.tech/zh-CN/MCIM/" target="_blank" rel="noopener noreferrer">https://www.pysio.tech/zh-CN/MCIM/</a> 下载最新的MCIM反向代理节点</p></li><li><p>解压文件</p></li><li><p>修改.env文件 填写如下内容</p></li></ol><div class="language-env" data-highlighter="prismjs" data-ext="env" data-title="env"><pre><code><span class="line">CLUSTER_ID=你的节点ID</span>
<span class="line">CLUSTER_SECRET=你的节点密钥</span>
<span class="line">CLUSTER_PUBLIC_PORT=你的对外开放端口（用户请求时访问）</span>
<span class="line">CLUSTER_PORT=你的本地开放端口</span>
<span class="line"></span></code></pre></div><ol start="4"><li>运行<code>run.ps1</code> 上线</li></ol><h3 id="linux-部署" tabindex="-1"><a class="header-anchor" href="#linux-部署"><span>Linux 部署</span></a></h3><h5 id="环境-2" tabindex="-1"><a class="header-anchor" href="#环境-2"><span>环境</span></a></h5><ul><li>Node.js 18 以上</li><li>Windows/MacOS/Linux</li><li>x86/arm 均可 (需支持Nodejs)</li></ul><h5 id="部署" tabindex="-1"><a class="header-anchor" href="#部署"><span>部署</span></a></h5><ol><li><p>前往 <a href="https://www.pysio.tech/zh-CN/MCIM/" target="_blank" rel="noopener noreferrer">https://www.pysio.tech/zh-CN/MCIM/</a> 下载最新的MCIM反向代理节点</p></li><li><p>解压文件</p></li><li><p>执行如下命令获取依赖包</p></li></ol><div class="language-bash" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">npm</span> <span class="token function">install</span></span>
<span class="line"></span></code></pre></div><ol start="4"><li>修改.env文件 填写如下内容</li></ol><div class="language-env" data-highlighter="prismjs" data-ext="env" data-title="env"><pre><code><span class="line">CLUSTER_ID=你的节点ID</span>
<span class="line">CLUSTER_SECRET=你的节点密钥</span>
<span class="line">CLUSTER_PUBLIC_PORT=你的对外开放端口（用户请求时访问）</span>
<span class="line">CLUSTER_PORT=你的本地开放端口</span>
<span class="line"></span></code></pre></div><ol start="5"><li>运行<code>node dist/index.js</code>上线</li></ol><h2 id="特别鸣谢" tabindex="-1"><a class="header-anchor" href="#特别鸣谢"><span>特别鸣谢</span></a></h2>`,30)),n(s,{title:"bangbang93",desc:"OpenBmclapi 作者",logo:"https://files.pysio.online/files/Avatar/bangbang93.jpg",link:"https://github.com/bangbang93",background:"rgba(236, 244, 250)"}),n(s,{title:"z0z0r4",desc:"Mcmod Info Mirror作者",logo:"https://files.pysio.online/files/Avatar/z0z0r4.jpg",link:"https://github.com/z0z0r4",background:"rgba(236, 244, 250)"}),n(s,{title:"𝞐𝞙𝞘𝞚𝞛𝞝",desc:"Go-OpenMcim 修改版作者",logo:"https://files.pysio.online/files/Avatar/WetemCloud.jpg",link:"https://github.com/WetemCloud",background:"rgba(236, 244, 250)"}),n(s,{title:"ZeroWolf",desc:"Node-OpenMcim 作者",logo:"https://files.pysio.online/files/Avatar/ZeroWolf.jpg",link:"https://github.com/ZeroWolf233",background:"rgba(236, 244, 250)"}),n(s,{title:"SaltWood_233",desc:"Open93AtHome 作者",logo:"https://files.pysio.online/files/Avatar/SaltWood_233.jpg",link:"https://github.com/SALTWOOD",background:"rgba(236, 244, 250)"})])}const k=o(d,[["render",m],["__file","OpenMCIM.html.vue"]]),b=JSON.parse(`{"path":"/posts/develop/OpenMCIM.html","title":"部署OpenMcim节点","lang":"zh-CN","frontmatter":{"title":"部署OpenMcim节点","date":"2024-10-07T00:00:00.000Z","icon":"fa-kit fa-modrinth","category":"develop","tag":["MC","服务"],"description":"相关信息 MCIM 需要提供文件镜像，但由于成本问题，以及受到 OpenBMCLAPI 的启发，本项目分发 Mod 文件基于网盘 感谢各位的支持~！感谢您为改善国内 Mod 下载环境的贡献！","head":[["meta",{"property":"og:url","content":"https://www.pysio.online/posts/develop/OpenMCIM.html"}],["meta",{"property":"og:site_name","content":"Pysio's Home"}],["meta",{"property":"og:title","content":"部署OpenMcim节点"}],["meta",{"property":"og:description","content":"相关信息 MCIM 需要提供文件镜像，但由于成本问题，以及受到 OpenBMCLAPI 的启发，本项目分发 Mod 文件基于网盘 感谢各位的支持~！感谢您为改善国内 Mod 下载环境的贡献！"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-01T08:02:40.000Z"}],["meta",{"property":"article:tag","content":"MC"}],["meta",{"property":"article:tag","content":"服务"}],["meta",{"property":"article:published_time","content":"2024-10-07T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-01T08:02:40.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"部署OpenMcim节点\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-10-07T00:00:00.000Z\\",\\"dateModified\\":\\"2024-11-01T08:02:40.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Pysio\\",\\"url\\":\\"https://github.com/pysio2007/\\"}]}"]]},"headers":[{"level":2,"title":"OpenBmclapi","slug":"openbmclapi","link":"#openbmclapi","children":[{"level":3,"title":"从源码运行","slug":"从源码运行","link":"#从源码运行","children":[]}]},{"level":2,"title":"Node-OpenMcim","slug":"node-openmcim","link":"#node-openmcim","children":[{"level":3,"title":"使用Docker","slug":"使用docker","link":"#使用docker","children":[]},{"level":3,"title":"从源码安装","slug":"从源码安装","link":"#从源码安装","children":[]}]},{"level":2,"title":"反向代理节点","slug":"反向代理节点","link":"#反向代理节点","children":[{"level":3,"title":"Windows 部署","slug":"windows-部署","link":"#windows-部署","children":[]},{"level":3,"title":"Linux 部署","slug":"linux-部署","link":"#linux-部署","children":[]}]},{"level":2,"title":"特别鸣谢","slug":"特别鸣谢","link":"#特别鸣谢","children":[]}],"git":{"createdTime":1728307940000,"updatedTime":1730448160000,"contributors":[{"name":"Pysio","username":"Pysio","email":"qq593277393@outlook.com","commits":11,"url":"https://github.com/Pysio"}]},"readingTime":{"minutes":3.12,"words":937},"filePathRelative":"posts/develop/OpenMCIM.md","localizedDate":"2024年10月7日","excerpt":"<!-- markdownlint-disable MD028 -->\\n<div class=\\"hint-container info\\">\\n<p class=\\"hint-container-title\\">相关信息</p>\\n<p>MCIM 需要提供文件镜像，但由于成本问题，以及受到 OpenBMCLAPI 的启发，本项目分发 Mod 文件基于网盘\\n感谢各位的支持~！感谢您为改善国内 Mod 下载环境的贡献！</p>\\n</div>\\n<!-- markdownlint-enable MD028 -->\\n","autoDesc":true}`);export{k as comp,b as data};

import{c as e}from"./chunk-4KE642ED-CEH_xXa3.js";import{p as t}from"./gitGraph-YCYPL57B-MEVJTYR7-B3PxZq--.js";import{ar as a,m as i,h as r,t as n,aV as l,W as s,as as o,aT as p,aW as d,aX as c,aY as g,C as m,w as h,B as u,T as f,k as x,S,v as w}from"./mermaid.esm.min-wXhOS7Ee.js";import"./chunk-5ZJXQJOJ-B2J_p7to.js";import"./app-DxyKUYci.js";var T=a.pie,y={sections:new Map,showData:!1,config:T},$=y.sections,C=y.showData,D=structuredClone(T),k={getConfig:i((()=>structuredClone(D)),"getConfig"),clear:i((()=>{$=new Map,C=y.showData,r()}),"clear"),setDiagramTitle:h,getDiagramTitle:u,setAccTitle:f,getAccTitle:x,setAccDescription:S,getAccDescription:w,addSection:i((({label:e,value:t})=>{$.has(e)||($.set(e,t),n.debug(`added new section: ${e}, with value: ${t}`))}),"addSection"),getSections:i((()=>$),"getSections"),setShowData:i((e=>{C=e}),"setShowData"),getShowData:i((()=>C),"getShowData")},v=i(((t,a)=>{e(t,a),a.setShowData(t.showData),t.sections.map(a.addSection)}),"populateDb"),b={parse:i((async e=>{let a=await t("pie",e);n.debug(a),v(a,k)}),"parse")},A=i((e=>`\n  .pieCircle{\n    stroke: ${e.pieStrokeColor};\n    stroke-width : ${e.pieStrokeWidth};\n    opacity : ${e.pieOpacity};\n  }\n  .pieOuterCircle{\n    stroke: ${e.pieOuterStrokeColor};\n    stroke-width: ${e.pieOuterStrokeWidth};\n    fill: none;\n  }\n  .pieTitleText {\n    text-anchor: middle;\n    font-size: ${e.pieTitleTextSize};\n    fill: ${e.pieTitleTextColor};\n    font-family: ${e.fontFamily};\n  }\n  .slice {\n    font-family: ${e.fontFamily};\n    fill: ${e.pieSectionTextColor};\n    font-size:${e.pieSectionTextSize};\n    // fill: white;\n  }\n  .legend text {\n    fill: ${e.pieLegendTextColor};\n    font-family: ${e.fontFamily};\n    font-size: ${e.pieLegendTextSize};\n  }\n`),"getStyles"),O=i((e=>{let t=[...e.entries()].map((e=>({label:e[0],value:e[1]}))).sort(((e,t)=>t.value-e.value));return l().value((e=>e.value))(t)}),"createPieArcs"),z=i(((e,t,a,i)=>{n.debug("rendering pie chart\n"+e);let r=i.db,l=s(),h=o(r.getConfig(),l.pie),u=p(t),f=u.append("g");f.attr("transform","translate(225,225)");let{themeVariables:x}=l,[S]=d(x.pieOuterStrokeWidth);S??(S=2);let w=h.textPosition,T=Math.min(450,450)/2-40,y=c().innerRadius(0).outerRadius(T),$=c().innerRadius(T*w).outerRadius(T*w);f.append("circle").attr("cx",0).attr("cy",0).attr("r",T+S/2).attr("class","pieOuterCircle");let C=r.getSections(),D=O(C),k=[x.pie1,x.pie2,x.pie3,x.pie4,x.pie5,x.pie6,x.pie7,x.pie8,x.pie9,x.pie10,x.pie11,x.pie12],v=g(k);f.selectAll("mySlices").data(D).enter().append("path").attr("d",y).attr("fill",(e=>v(e.data.label))).attr("class","pieCircle");let b=0;C.forEach((e=>{b+=e})),f.selectAll("mySlices").data(D).enter().append("text").text((e=>(e.data.value/b*100).toFixed(0)+"%")).attr("transform",(e=>"translate("+$.centroid(e)+")")).style("text-anchor","middle").attr("class","slice"),f.append("text").text(r.getDiagramTitle()).attr("x",0).attr("y",-200).attr("class","pieTitleText");let A=f.selectAll(".legend").data(v.domain()).enter().append("g").attr("class","legend").attr("transform",((e,t)=>"translate(216,"+(22*t-22*v.domain().length/2)+")"));A.append("rect").attr("width",18).attr("height",18).style("fill",v).style("stroke",v),A.data(D).append("text").attr("x",22).attr("y",14).text((e=>{let{label:t,value:a}=e.data;return r.getShowData()?`${t} [${a}]`:t}));let z=512+Math.max(...A.selectAll("text").nodes().map((e=>(null==e?void 0:e.getBoundingClientRect().width)??0)));u.attr("viewBox",`0 0 ${z} 450`),m(u,450,z,h.useMaxWidth)}),"draw"),M={parser:b,db:k,renderer:{draw:z},styles:A};export{M as diagram};